function LoginController(e,n,r){e.login=function(o,t){n.login(o,t).then(function(o){e.$emit("login",o.data),r.url("/")})}}function PostsController(e,o){!function t(){o.fetch().then(function(o){e.posts=o.data?o.data:[]},function(o){});e.addPost=function(){e.body&&o.create({body:e.body}).then(function(o){e.posts.unshift(o.data),e.body=null},function(o){console.log(o)})};e.removePost=function(){o.remove({id:this.post._id}).then(function(o){t()},function(o){console.log(o)})}}()}function RegisterController(e,n,r){e.createUser=function(o,t){n.createUser(o,t).then(function(o){e.$emit("login",o.data),r.url("/")})}}LoginController.$inject=["$scope","UserService","$location"],PostsController.$inject=["$scope","PostsService"],RegisterController.$inject=["$scope","UserService","$location"],angular.module("app",["ngRoute"]).config(["$locationProvider",function(o){o.hashPrefix("")}]),angular.module("app").controller("ApplicationController",["$scope",function(e){e.$on("login",function(o,t){e.currentUser=t})}]),angular.module("app").controller("LoginController",LoginController),angular.module("app").controller("PostsController",PostsController),angular.module("app").service("PostsService",["$http",function(t){this.fetch=function(){return t({method:"GET",url:"http://localhost:3000/api/posts"})},this.create=function(o){return t({url:"/api/posts",method:"POST",data:o})},this.remove=function(o){return t({url:"/api/removePost",method:"POST",data:o})}}]),angular.module("app").controller("RegisterController",RegisterController),angular.module("app").config(["$routeProvider","$locationProvider",function(o,t){o.when("/",{controller:"PostsController",templateUrl:"posts.html"}).when("/register",{controller:"RegisterController",templateUrl:"register.html"}).when("/login",{controller:"LoginController",templateUrl:"login.html"})}]),angular.module("app").service("UserService",["$http",function(e){var n=this;this.getUser=function(){return e({url:"/api/users",method:"GET"})},this.login=function(o,t){return e({url:"/api/sessions",method:"POST",data:{username:o,password:t}}).then(function(o){return n.token=o.data,e.defaults.headers.common["X-Auth"]=o.data,n.getUser()})},this.createUser=function(o,t){return e({url:"/api/users",method:"POST",data:{username:o,password:t}}).then(function(){return n.login(o,t)})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbnRyb2xsZXIuanMiLCJwb3N0cy5jb250cm9sbGVyLmpzIiwicmVnaXN0ZXIuY29udHJvbGxlci5qcyIsIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmNvbnRyb2xsZXIuanMiLCJwb3N0cy5zZXJ2aWNlLmpzIiwicm91dGVzLmpzIiwidXNlci5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbIkxvZ2luQ29udHJvbGxlciIsIiRzY29wZSIsIlVzZXJTZXJ2aWNlIiwiJGxvY2F0aW9uIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsInJlc3BvbnNlIiwiJGVtaXQiLCJkYXRhIiwidXJsIiwiUG9zdHNDb250cm9sbGVyIiwiUG9zdHNTZXJ2aWNlIiwiaW5pdCIsImZldGNoIiwicG9zdHMiLCJlcnJvciIsImFkZFBvc3QiLCJib2R5IiwiY3JlYXRlIiwidW5zaGlmdCIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVQb3N0IiwicmVtb3ZlIiwiaWQiLCJ0aGlzIiwicG9zdCIsIl9pZCIsIlJlZ2lzdGVyQ29udHJvbGxlciIsImNyZWF0ZVVzZXIiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJoYXNoUHJlZml4IiwiY29udHJvbGxlciIsIiRvbiIsIl8iLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJzZXJ2aWNlIiwiJGh0dHAiLCJtZXRob2QiLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsInN2YyIsImdldFVzZXIiLCJ2YWwiLCJ0b2tlbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiJdLCJtYXBwaW5ncyI6IkFBTUEsU0FBQUEsZ0JBQUFDLEVBQUFDLEVBQUFDLEdBSUFGLEVBQUFHLE1BQUEsU0FBQUMsRUFBQUMsR0FDQUosRUFBQUUsTUFBQUMsRUFBQUMsR0FDQUMsS0FBQSxTQUFBQyxHQUNBUCxFQUFBUSxNQUFBLFFBQUFELEVBQUFFLE1BRUFQLEVBQUFRLElBREEs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cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpXG5cbi8qKiBAbmdJbmplY3QgKi9cblxuZnVuY3Rpb24gTG9naW5Db250cm9sbGVyKCRzY29wZSxVc2VyU2VydmljZSwgJGxvY2F0aW9uICkge1xuICAgIGluaXQoKTsgXG5cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSxwYXNzd29yZCkge1xuICAgICAgICBVc2VyU2VydmljZS5sb2dpbih1c2VybmFtZSxwYXNzd29yZClcbiAgICAgICAgLnRoZW4gKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHJlc3BvbnNlLmRhdGEpXG4gICAgICAgICAgICB2YXIgdXJsID0gJy8nO1xuIFx0XHRcdCRsb2NhdGlvbi51cmwodXJsKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgfVxufVxuIiwiYW5ndWxhclxuLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdQb3N0c0NvbnRyb2xsZXInLCBQb3N0c0NvbnRyb2xsZXIpXG5cbi8qKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIFBvc3RzQ29udHJvbGxlcigkc2NvcGUsUG9zdHNTZXJ2aWNlICkge1xuXG5pbml0KCk7XG5cblxuZnVuY3Rpb24gaW5pdCgpIHtcblxuICAgIFBvc3RzU2VydmljZS5mZXRjaCgpLnRoZW4gKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAkc2NvcGUucG9zdHMgPSByZXNwb25zZS5kYXRhID8gcmVzcG9uc2UuZGF0YSA6IFtdO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge30pXG4gIFxuXG4gICAgJHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkc2NvcGUuYm9keSkge1xuICAgICAgICAgICBQb3N0c1NlcnZpY2UuY3JlYXRlKHsgXG4gICAgICAgIC8vICAgdXNlcm5hbWU6IFwic2FtcGxlVXNlclwiLFxuICAgICAgICAgICBib2R5OiAkc2NvcGUuYm9keX0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJvZHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfVxuICAgICRzY29wZS5yZW1vdmVQb3N0ID0gZnVuY3Rpb24oKSB7XG4gICAgXG4gICAgICAgICAgIFBvc3RzU2VydmljZS5yZW1vdmUoIHsgXG4gICAgICAgICAgICBpZDogdGhpcy5wb3N0Ll9pZCAgICAgICAgICAgIFxuICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBpbml0KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxufVxufSIsImFuZ3VsYXJcbi5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKVxuXG5cblxuZnVuY3Rpb24gUmVnaXN0ZXJDb250cm9sbGVyKCRzY29wZSxVc2VyU2VydmljZSwkbG9jYXRpb24gICkge1xuICAgIGluaXQoKTsgXG5cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICRzY29wZS5jcmVhdGVVc2VyID0gZnVuY3Rpb24gKHVzZXJuYW1lLHBhc3N3b3JkKSB7XG4gICAgICAgIFVzZXJTZXJ2aWNlLmNyZWF0ZVVzZXIodXNlcm5hbWUscGFzc3dvcmQpXG4gICAgICAgIC50aGVuIChmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLCByZXNwb25zZS5kYXRhKVxuICAgICAgICAgICAgdmFyIHVybCA9ICcvJztcbiAgICAgICAgICAgICRsb2NhdGlvbi51cmwodXJsKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgfVxufVxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgICAnbmdSb3V0ZSdcbl0pXG4uY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJycpO1xuICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25Db250cm9sbGVyJyAsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICRzY29wZS4kb24oJ2xvZ2luJywgZnVuY3Rpb24gKF8sdXNlciApIHtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyPXVzZXJcbiAgICB9KVxufSkiLCJhbmd1bGFyXG4ubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Bvc3RzU2VydmljZScsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9zdHMnXG4gICAgICAgIH0pXG5cbiAgICB9XG4gICAgdGhpcy5jcmVhdGU9IGZ1bmN0aW9uKHBvc3QpIHtcbiAgICAgICAgcmV0dXJuICAkaHR0cCh7XG4gICAgICAgICAgICB1cmw6ICcvYXBpL3Bvc3RzJyxcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhOiBwb3N0XG4gICAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuICAgICRodHRwKHtcbiAgICAgICAgICAgIHVybDogJy9hcGkvcmVtb3ZlUG9zdCcsXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgZGF0YTogaWRcbiAgICB9KX19KSIsImFuZ3VsYXJcbi5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwkbG9jYXRpb25Qcm92aWRlcikge1xuXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsIHtjb250cm9sbGVyOiAnUG9zdHNDb250cm9sbGVyJywgdGVtcGxhdGVVcmw6J3Bvc3RzLmh0bWwnfSlcbiAgICAud2hlbignL3JlZ2lzdGVyJywge2NvbnRyb2xsZXI6J1JlZ2lzdGVyQ29udHJvbGxlcicsIHRlbXBsYXRlVXJsOiAncmVnaXN0ZXIuaHRtbCd9KVxuICAgIC53aGVuKCcvbG9naW4nLCB7Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsIHRlbXBsYXRlVXJsOidsb2dpbi5odG1sJ30pO1xuICAgXG59KSIsImFuZ3VsYXJcbi5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVXNlclNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgIHZhciBzdmMgPSB0aGlzO1xuICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gICRodHRwKHtcbiAgICAgICAgICAgIHVybDogJy9hcGkvdXNlcnMnLFxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICAgIH0pXG4gICAgfVxuICAgdGhpcy5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSxwYXNzd29yZCkge1xuXG4gICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgdXJsOiAnL2FwaS9zZXNzaW9ucycsXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGRhdGE6IHt1c2VybmFtZTp1c2VybmFtZSwgcGFzc3dvcmQ6cGFzc3dvcmR9XG4gICAgfSlcbiAgICAudGhlbiAoZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBzdmMudG9rZW4gPSB2YWwuZGF0YVxuICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSA9IHZhbC5kYXRhO1xuICAgICAgICByZXR1cm4gc3ZjLmdldFVzZXIoKVxuICAgIH1cbiAgICBcbiAgICAgICApfVxuICAgIHRoaXMuY3JlYXRlVXNlciAgPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCkge1xuIHJldHVybiAkaHR0cCh7XG4gICAgICAgIHVybDogJy9hcGkvdXNlcnMnLFxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBkYXRhOiB7dXNlcm5hbWU6dXNlcm5hbWUsIHBhc3N3b3JkOnBhc3N3b3JkfVxuICAgIH0pXG4gICAgLnRoZW4gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN2Yy5sb2dpbih1c2VybmFtZSxwYXNzd29yZClcbiAgICB9KVxuICAgICBcbiAgICBcbn19KSJdfQ==
